(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73b73d14"],{"2f9c":function(t,e,a){},"9ed8":function(t,e,a){"use strict";var i=a("2f9c"),n=a.n(i);n.a},fdf9:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t._m(0),a("div",{staticClass:"box-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("div",{staticClass:"box-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Danh mục cha")]),a("Select2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"parent_id",options:t.category.myOptions},on:{change:function(e){return t.myChangeEvent(e)}},model:{value:t.category.myValue,callback:function(e){t.$set(t.category,"myValue",e)},expression:"category.myValue"}}),a("span",{staticClass:"error"},[t._v(t._s(t.errors.first("parent_id")))])],1),a("div",{staticClass:"form-group"},[a("label",[t._v("Tên danh mục")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.post.name,expression:"post.name"},{name:"validate",rawName:"v-validate",value:"required|min:3|max:50",expression:"'required|min:3|max:50'"}],class:{"form-control":!0,"error-boder":t.errors.first("name")},attrs:{name:"name",type:"text",placeholder:"Nhập tên danh mục..."},domProps:{value:t.post.name},on:{input:function(e){e.target.composing||t.$set(t.post,"name",e.target.value)}}}),a("span",{staticClass:"error"},[t._v(t._s(t.errors.first("name")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"},{name:"validate",rawName:"v-validate",value:"required|min:3|max:50",expression:"'required|min:3|max:50'"}],class:{"form-control":!0,"error-boder":t.errors.first("title")},attrs:{name:"title",type:"text",placeholder:"Nhập title..."},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}}),a("span",{staticClass:"error"},[t._v(t._s(t.errors.first("title")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v("Icon")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|image",expression:"'required|image'"}],attrs:{"data-vv-as":"image",type:"file",name:"icon"},on:{change:t.onInputChange}}),a("span",{staticClass:"error"},[t._v(t._s(t.errors.first("icon")))]),a("div",{attrs:{id:"upload-icon"}},[a("div",{staticClass:"upload-icon imgPreview",style:{backgroundImage:"url("+t.imgPreview+")"}})])])]),a("div",{staticClass:"col-lg-6"})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Thêm")])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-header with-border"},[a("h3",{staticClass:"box-title"},[t._v("Thêm danh mục mới")])])}],r=(a("99af"),a("4de4"),a("b0c0"),a("b85c")),o=a("bc3a"),s=a.n(o),l=a("3f5b"),c=a("d3bd"),d=a.n(c),m=a("7bb1"),u={metaInfo:{title:"Thêm danh mục"},components:{Select2:l["a"]},data:function(){return{api:this.$store.state.domainApi,post:{name:"",url:"",icon:"",title:"",open:0,parent_id:0,other:"{}"},file:{},imgPreview:{},category:{myValue:0,myOptions:[],errors:[]},dictionary:{vi:{custom:{name:{required:"Vui lòng nhập tên danh mục !",min:"Tên danh mục tối thiểu 3 ký tự !",max:"Tên danh mục không được vượt quá 50 ký tự !"},parent_id:{required:"Vui lòng chọn danh mục cha !"},icon:{required:"Vui lòng chọn icon !",image:"Vui lòng chọn định dạng hình ảnh !"},title:{required:"Vui lòng nhập title !",min:"Title tối thiểu 3 ký tự !",max:"Title không được vượt quá 50 ký tự !"}}}}}},methods:{handleSubmit:function(){var t=this,e=this.post.name;this.post.url=d()(e.toLowerCase()),this.$validator.validate().then((function(e){if(e){var a=new FormData;a.set("name",t.post.name),a.append("url",t.post.url),a.append("icon",t.post.icon),a.append("title",t.post.title),a.append("open",t.post.open),a.append("parent_id",t.post.parent_id),a.append("other",t.post.other),a.append("file",t.file),s.a.post("".concat(t.api,"/admin/category"),a,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){1===e.data.success?(t.flash(e.data.message,"success",{timeout:3e3}),t.$router.push({name:"route.admin.category.index"})):t.flash(e.data.message,"error",{timeout:3e3})}))}}))},onInputChange:function(t){var e=this;this.file=t.target.files[0];var a=new FileReader;a.onload=function(t){return e.imgPreview=t.target.result},a.readAsDataURL(this.file)},myChangeEvent:function(t){this.post.parent_id=t},formatJson:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"--------|",n=[],o=Object(r["a"])(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(s.parent_id===a){var l={id:s.id,text:i+s.name};n.push(l);var c,d=this.formatJson(t.filter((function(t){return t.parent_id!=a})),s.id,i+"--------|"),m=Object(r["a"])(d);try{for(m.s();!(c=m.n()).done;){var u=c.value;n.push(u)}}catch(p){m.e(p)}finally{m.f()}}}}catch(p){o.e(p)}finally{o.f()}return n}},created:function(){var t=this;m["a"].localize(this.dictionary);var e=new m["a"]({first_name:"alpha"});e.localize("vi");var a=this.$route.params.id;a&&(this.category.myValue=a,this.post.parent_id=a),s.a.get("".concat(this.api,"/admin/category"),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){var a=[{id:0,text:"--ROOT--"}];t.category.myOptions=a.concat(t.formatJson(e.data))})).catch((function(t){console.log(t)}))}},p=u,v=(a("9ed8"),a("2877")),h=Object(v["a"])(p,i,n,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-73b73d14.d16547dc.js.map