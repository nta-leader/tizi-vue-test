{"version":3,"sources":["webpack:///./src/components/public/user/page/Confirm/Confirm.vue?83a1","webpack:///./src/components/public/user/page/Confirm/Confirm.vue?bbd1","webpack:///src/components/public/user/page/Confirm/Confirm.vue","webpack:///./src/components/public/user/page/Confirm/Confirm.vue?69a7","webpack:///./src/components/public/user/page/Confirm/Confirm.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","isEmailNew","_e","_v","_s","email","on","$event","confirmMail","directives","name","rawName","value","expression","domProps","checkEmail","target","composing","emailNew","errors","first","isEmail","code","confirm","staticRenderFns","timeout","component"],"mappings":"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","file":"js/chunk-65f75c52.9e4638cb.js","sourcesContent":["import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Confirm.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Confirm.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box box-primary\"},[_vm._m(0),_c('div',{staticClass:\"box-body no-padding\"},[_c('div',{staticClass:\"box-header with-border\"},[_c('form',{attrs:{\"action\":\"javascript:void(0)\"}},[(!_vm.isEmailNew)?_c('div',{staticClass:\"form-group has-feedback\"},[_c('span',{staticClass:\"form-control\"},[_vm._v(_vm._s(_vm.email))]),_c('span',{staticClass:\"glyphicon glyphicon-log-in form-control-feedback\"}),_c('a',{staticClass:\"btn-email\",on:{\"click\":function($event){_vm.isEmailNew = !_vm.isEmailNew}}},[_vm._v(\"Đổi email\")]),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.confirmMail}},[_vm._v(\"Lấy code với email trên\")])]):_vm._e(),(_vm.isEmailNew)?_c('div',{staticClass:\"form-group has-feedback\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.emailNew),expression:\"emailNew\"},{name:\"validate\",rawName:\"v-validate\",value:('required|email'),expression:\"'required|email'\"}],staticClass:\"form-control\",attrs:{\"name\":\"emailNew\",\"data-vv-as\":\"email\",\"type\":\"email\",\"placeholder\":\"Email mới\"},domProps:{\"value\":(_vm.emailNew)},on:{\"keyup\":_vm.checkEmail,\"input\":function($event){if($event.target.composing){ return; }_vm.emailNew=$event.target.value}}}),_c('span',{staticClass:\"glyphicon glyphicon-log-in form-control-feedback\"}),_c('span',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errors.first(\"emailNew\")))]),(_vm.isEmail)?_c('span',{staticClass:\"error\"},[_vm._v(\"Email đã được sử dụng !\")]):_vm._e(),_c('a',{staticClass:\"btn-email\",on:{\"click\":function($event){_vm.isEmailNew = !_vm.isEmailNew}}},[_vm._v(\"Email cũ\")]),(!_vm.isEmail)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.confirmMail}},[_vm._v(\"Lấy code với email trên\")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"form-group has-feedback\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"},{name:\"validate\",rawName:\"v-validate\",value:('required|min:4|max:4'),expression:\"'required|min:4|max:4'\"}],staticClass:\"form-control\",attrs:{\"name\":\"code\",\"type\":\"text\",\"placeholder\":\"Kiểm tra email > nhập code...\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}}),_c('span',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errors.first(\"code\")))])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-8\"}),_c('div',{staticClass:\"col-xs-4\"},[(_vm.isEmailNew ? _vm.isEmail ? false: true : true)?_c('button',{staticClass:\"btn btn-primary btn-block btn-flat\",attrs:{\"type\":\"submit\"},on:{\"click\":_vm.confirm}},[_vm._v(\"Xác nhận\")]):_vm._e()])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box-header with-border\"},[_c('h3',{staticClass:\"box-title\"},[_vm._v(\"Xác thực tài khoản\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"box box-primary\">\n        <div class=\"box-header with-border\">\n            <h3 class=\"box-title\">Xác thực tài khoản</h3>\n        </div>\n        <div class=\"box-body no-padding\">\n            <div class=\"box-header with-border\">\n                <form action=\"javascript:void(0)\">\n                    <div v-if=\"!isEmailNew\" class=\"form-group has-feedback\">\n                        <span class=\"form-control\">{{ email }}</span>\n                        <span class=\"glyphicon glyphicon-log-in form-control-feedback\"></span>\n                        <a v-on:click=\"isEmailNew = !isEmailNew\" class=\"btn-email\">Đổi email</a>\n                        <a v-on:click=\"confirmMail\" href=\"#\">Lấy code với email trên</a>\n                    </div>\n                    <div v-if=\"isEmailNew\" class=\"form-group has-feedback\">\n                        <input v-on:keyup=\"checkEmail\" v-model=\"emailNew\" name=\"emailNew\" v-validate=\"'required|email'\" data-vv-as=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email mới\">\n                        <span class=\"glyphicon glyphicon-log-in form-control-feedback\"></span>\n                        <span class=\"error\">{{ errors.first(\"emailNew\") }}</span>\n                        <span v-if=\"isEmail\" class=\"error\">Email đã được sử dụng !</span>\n                        <a v-on:click=\"isEmailNew = !isEmailNew\" class=\"btn-email\">Email cũ</a>\n                        <a v-if=\"!isEmail\" v-on:click=\"confirmMail\" href=\"#\">Lấy code với email trên</a>\n                    </div>\n                    <div class=\"form-group has-feedback\">\n                        <input v-model=\"code\" name=\"code\" v-validate=\"'required|min:4|max:4'\" type=\"text\" class=\"form-control\" placeholder=\"Kiểm tra email > nhập code...\">\n                        <span class=\"error\">{{ errors.first(\"code\") }}</span>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-xs-8\">\n                            \n                        </div>\n                        <div class=\"col-xs-4\">\n                            <button v-if=\"isEmailNew ? isEmail ? false: true : true\" v-on:click=\"confirm\" type=\"submit\" class=\"btn btn-primary btn-block btn-flat\">Xác nhận</button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { Validator } from \"vee-validate\";\nimport axios from 'axios';\n\nexport default {\n    metaInfo(){\n\t\treturn {\n\t\t\ttitle: \"Xác thực tài khoản\",\n\t\t\thtmlAttrs: {\n\t\t\t\tlang: 'vi',\n\t\t\t\tamp: true\n\t\t\t}\n\t\t}\n\t},\n    data(){\n        return {\n            api: this.$store.state.domainApi,\n            isEmailNew: false,\n            isEmail: false,\n            email: this.$store.state.user.email,\n            emailNew: '',\n            email_succes: '',\n            code:'',\n            dictionary: {\n                vi: {\n                    custom: {\n                        \"emailNew\":{\n                            required: \"Vui lòng nhập email !\",\n                            email: \"Vui lòng nhập đúng định dạng email !\",\n                        },\n                        \"code\": {\n                            required: \"Vui lòng nhập code!\",\n                            min: \"Code có 4 ký tự !\",\n                            max: \"Code có 4 ký tự !\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    methods: {\n        async check(data){\n            var check = await axios.get(`${this.api}/auth/check`,{\n                params: data\n            });\n            return check.data;\n        },\n        async checkEmail(e){\n            var data = {email: e.target.value};\n            if(e.target.value){\n                var check = await this.check(data)\n                this.isEmail = check.result;\n            }\n        },\n        async confirm(){\n            const user = await axios.put(`${this.api}/auth/active`, {\n                username: this.$store.state.user.username,\n                code: this.code,\n                email_new: this.isEmailNew ? this.email_succes : null\n            });\n            if(user.data.success===1){\n                this.$store.state.user.status = 1;\n                this.flash(user.data.message, 'success', {\n                    timeout: 3000\n                });\n                this.$router.push({name:'home'});\n            }else this.$swal(user.data.message,\"\", \"error\");\n        },\n        async confirmMail(){\n            this.$swal.fire({\n                title: 'Đang gửi code đến email của bạn',\n                text: \"Vui lòng chờ !\",\n                allowOutsideClick: false\n            });\n            this.$swal.showLoading();\n\n            const mail = await axios.put(`${this.api}/auth/confirmMail`, {\n                username: this.$store.state.user.username,\n                email: this.isEmailNew ? this.emailNew : this.email\n            });\n            if(mail.data.success===1){\n                this.flash(mail.data.message, 'success', {\n                    timeout: 3000\n                });\n                this.$swal.close();\n                this.email_succes = this.emailNew;\n            }else this.$swal(mail.data.message,\"\", \"error\");\n        }\n    },\n    created(){\n        Validator.localize(this.dictionary);\n        const validator = new Validator({ first_name: 'alpha' });\n        validator.localize('vi');\n    }\n}\n</script>\n\n<style>\n.error{\n    display: block;\n    color: red;\n    margin-left: 1px;\n}\n.content-wrapper{\n    min-height: 682px;\n}\n.btn-email, .btn-email:hover{\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    background: #00a65a;\n    color: #f4f4f4;\n    font-weight: 600;\n    padding: 7px 6px;\n    z-index: 2;\n}\n@media(max-width: 768px){\n    .content-wrapper{\n        min-height: 100%;\n    }\n}\n</style>","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Confirm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Confirm.vue?vue&type=template&id=392399d2&\"\nimport script from \"./Confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./Confirm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Confirm.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}